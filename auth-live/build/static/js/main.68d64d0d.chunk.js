(this["webpackJsonpauth-live"]=this["webpackJsonpauth-live"]||[]).push([[0],{35:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),s=a.n(c),r=a(28),i=a.n(r),l=(a(35),a(9)),o=a.n(l),u=a(13),j=a(8),d=a(10),h=a(2),b=Object(c.createContext)(null),p=function(){var e=Object(c.useContext)(b),t=e.userData,a=e.setUserData;return Object(n.jsx)("div",{children:Object(n.jsx)("nav",{className:"black",children:Object(n.jsxs)("div",{className:"nav-wrapper container",children:[Object(n.jsx)("a",{href:"/",className:"brand-logo",children:"Logo"}),Object(n.jsx)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:t.user?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("li",{children:Object(n.jsx)(d.b,{to:"/",onClick:function(){a({token:void 0,user:void 0}),localStorage.setItem("auth-token","")},children:"Log Out"})})}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("li",{children:Object(n.jsx)(d.b,{to:"/register",children:"Sign Up"})}),Object(n.jsx)("li",{children:Object(n.jsx)(d.b,{to:"/login",children:"Log In"})})]})})]})})})},O=a(11),x=a.n(O),m=function(){var e=Object(c.useState)(),t=Object(j.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(),i=Object(j.a)(r,2),l=i[0],d=i[1],p=Object(c.useState)(),O=Object(j.a)(p,2),m=O[0],v=O[1],f=Object(c.useState)(),g=Object(j.a)(f,2),N=g[0],k=g[1],w=Object(c.useContext)(b).setUserData,S=Object(h.f)(),C=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={email:a,password:m,name:l,lastName:N},e.next=4,x.a.post("http://localhost:8000/api/auth/register",n);case 4:return e.next=6,x.a.post("http://localhost:8000/api/auth/login",{email:a,password:m});case 6:c=e.sent,w({token:c.data.token,user:c.data.user}),localStorage.setItem("auth-token",c.data.token),S.push("/");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(b.Provider,{value:{name:l},children:Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("form",{onSubmit:C,className:"white",children:[Object(n.jsx)("h4",{children:"Registration"}),Object(n.jsxs)("div",{className:"input-field",children:[Object(n.jsx)("div",{className:"input-field",children:Object(n.jsx)("input",{id:"firstName",type:"text",placeholder:"First Name",onChange:function(e){return d(e.target.value)}})}),Object(n.jsx)("div",{className:"input-field",children:Object(n.jsx)("input",{id:"lastName",type:"text",placeholder:"Last Name",onChange:function(e){return k(e.target.value)}})}),Object(n.jsx)("div",{className:"input-field",children:Object(n.jsx)("input",{id:"email",type:"text",placeholder:"E-mail",onChange:function(e){return s(e.target.value)}})}),Object(n.jsx)("div",{className:"input-field",children:Object(n.jsx)("input",{id:"password",type:"password",placeholder:"Password",onChange:function(e){return v(e.target.value)}})}),Object(n.jsx)("div",{className:"input-field",children:Object(n.jsx)("button",{className:"amber darken-3 btn",children:"Sign Up"})})]})]})})})})},v=function(){var e=Object(c.useState)(),t=Object(j.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(),i=Object(j.a)(r,2),l=i[0],d=i[1],p=Object(c.useContext)(b).setUserData,O=Object(h.f)(),m=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={email:a,password:l},e.next=4,x.a.post("http://localhost:8000/api/auth/login",n);case 4:c=e.sent,p({token:c.data.token,user:c.data.user}),localStorage.setItem("auth-token",c.data.token),O.push("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("form",{onSubmit:m,className:"white",children:[Object(n.jsx)("h4",{children:"Log In"}),Object(n.jsx)("div",{className:"input-field",children:Object(n.jsxs)("div",{className:"input-field",children:[Object(n.jsx)("div",{className:"input-field",children:Object(n.jsx)("input",{id:"email",type:"text",placeholder:"E-mail",onChange:function(e){return s(e.target.value)}})}),Object(n.jsx)("div",{className:"input-field",children:Object(n.jsx)("input",{id:"password",type:"text",placeholder:"Password",onChange:function(e){return d(e.target.value)}})}),Object(n.jsx)("div",{className:"input-field",children:Object(n.jsx)("button",{className:"amber darken-3 btn",children:"Log In"})})]})})]})})})},f=function(){var e=Object(c.useContext)(b).name;return Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("h4",{children:e})})};var g=function(){var e=Object(c.useState)({token:void 0,user:void 0}),t=Object(j.a)(e,2),a=t[0],s=t[1];return Object(c.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,x.a.post("http://localhost:8000/api/auth/tokenIsValid",null,{headers:{"x-auth-token":t}});case 4:if(!e.sent.data){e.next=10;break}return e.next=8,x.a.get("http://localhost:8000/api/auth",{headers:{"x-auth-token":t}});case 8:a=e.sent,s({token:t,user:a.data});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.jsx)(d.a,{children:Object(n.jsx)(b.Provider,{value:{userData:a,setUserData:s},children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(p,{}),Object(n.jsxs)(h.c,{children:[Object(n.jsx)(h.a,{exact:!0,path:"/",component:f}),Object(n.jsx)(h.a,{path:"/register",component:m}),Object(n.jsx)(h.a,{path:"/login",component:v})]})]})})})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,61)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(g,{})}),document.getElementById("root")),N()}},[[60,1,2]]]);
//# sourceMappingURL=main.68d64d0d.chunk.js.map